{"version":3,"file":"util.js","sourceRoot":"","sources":["util.ts"],"names":[],"mappings":";AAAA;;GAEG;;AAEH,yDAA0D;AACjD,wCAAc;AAIvB,SAAgB,YAAY,CAAC,OAAO,EAAE,KAA8C,cAAc,EAAE,QAAa,EAAE;IAElH,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC;QAEtC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,QAAQ,EAC5C;YACC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACV;aAED;YACC,IAAI,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7B,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;SACpC;QAED,OAAO,CAAC,CAAC;IACV,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC;QAE1B,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;QAC9B,OAAO,CAAC,CAAC;IACV,CAAC,CAAC,CAAC;IAEH,OAAO,OAAO,CAAC;AAChB,CAAC;AAxBD,oCAwBC;AAED,SAAgB,cAAc,CAAC,OAAO;IAErC,OAAO,OAAO;SACZ,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC;QAErB,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,QAAQ,EAC5C;YACC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;SACf;aAED;YACC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC/B;QAED,OAAO,CAAC,CAAC;IACV,CAAC,EAAE,EAAE,CAAC,CACN;AACF,CAAC;AAjBD,wCAiBC;AAED,SAAgB,IAAI,CAAC,CAAQ,EAAE,KAA8C,cAAc;IAE1F,IAAI,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAE1B,OAAO,cAAc,CAAC,YAAY,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;AAC3C,CAAC;AALD,oBAKC;AAED,kBAAe,OAAkC,CAAC","sourcesContent":["/**\n * Created by user on 2018/3/30/030.\n */\n\nimport naturalCompare = require('string-natural-compare');\nexport { naturalCompare }\n\nimport { ITree, ITreeEntries } from '../core';\n\nexport function entries_sort(entries, fn: (a: string, b: string, cache) => number = naturalCompare, cache: any = {})\n{\n\tentries = entries.reduce(function (a, b)\n\t{\n\t\tif (b[1] === null || typeof b[1] == 'string')\n\t\t{\n\t\t\ta.push(b);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet d = Object.entries(b[1]);\n\t\t\ta.push([b[0], entries_sort(d, fn)]);\n\t\t}\n\n\t\treturn a;\n\t}, []);\n\n\tentries.sort(function (a, b)\n\t{\n\t\tlet r = fn(a[0], b[0], cache);\n\t\treturn r;\n\t});\n\n\treturn entries;\n}\n\nexport function entries_reduce(entries)\n{\n\treturn entries\n\t\t.reduce(function (a, b)\n\t\t{\n\t\t\tif (b[1] === null || typeof b[1] == 'string')\n\t\t\t{\n\t\t\t\ta[b[0]] = b[1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ta[b[0]] = entries_reduce(b[1]);\n\t\t\t}\n\n\t\t\treturn a;\n\t\t}, {})\n\t;\n}\n\nexport function sort(a: ITree, fn: (a: string, b: string, cache) => number = naturalCompare)\n{\n\tlet r = Object.entries(a);\n\n\treturn entries_reduce(entries_sort(r, fn))\n}\n\nexport default exports as typeof import('./util');\n"]}